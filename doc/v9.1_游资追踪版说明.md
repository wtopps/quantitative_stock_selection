# A股次日冲高标的筛选系统 v9.1 - 游资追踪版

## 版本信息
- **版本号**: v9.1 - 游资追踪版
- **更新日期**: 2026-01-15
- **核心升级**: 新增游资动向追踪分析系统

---

## 一、v9.1 核心升级内容

### 🆕 游资追踪分析系统

#### 1. 龙虎榜数据获取
- **数据来源**: 使用 akshare 获取东方财富龙虎榜数据
- **回溯周期**: 默认30天（可配置）
- **数据内容**:
  - 个股上榜记录（日期、原因、涨跌幅、成交额）
  - 营业部买卖明细（前5大买卖席位及金额）
  - 净买入/卖出统计

#### 2. 游资强度评分系统（0-100分）

**评分维度**：
```
总分 = 上榜频率得分（30%）+ 知名游资参与度（30%）+ 净买入强度（25%）+ 持续性（15%）
```

**维度详解**：

| 维度 | 权重 | 评分标准 | 说明 |
|------|------|----------|------|
| **上榜频率** | 30% | ≥5次=30分<br/>≥3次=25分<br/>≥2次=15分<br/>1次=5分 | 近30天内上榜龙虎榜的次数 |
| **知名游资参与度** | 30% | 一线游资=10分/家<br/>二线游资=6分/家<br/>机构=3分/家 | 识别知名游资席位的介入程度 |
| **净买入强度** | 25% | ≥5000万=25分<br/>≥3000万=20分<br/>≥1000万=15分<br/>≥500万=10分 | 游资总体净买入金额 |
| **持续性** | 15% | 连续≥4天=15分<br/>连续3天=10分<br/>连续2天=6分 | 连续上榜天数（3天内视为连续） |

#### 3. 买入时机判断

**操作阶段识别**：

| 阶段 | 判断条件 | 时机得分 | 操作建议 | 说明 |
|------|----------|----------|----------|------|
| **建仓期** 🟢 | 价格位置<30% + 净买入>0 | 85分 | 积极关注 | 游资低位建仓，最佳介入时机 |
| **加仓期** 🟡 | 价格位置30-60% + 持续净买入 | 75分 | 适合跟进 | 游资持续加仓，温和上涨 |
| **拉升期** 🟠 | 价格位置60-85% + 快速上涨 | 60分 | 短线参与 | 游资拉升中，追高风险较大 |
| **出货期** 🔴 | 价格位置≥85% or 净卖出 | 20分 | 回避 | 游资可能出货，风险极高 |

#### 4. 风险预警机制

**风险信号检测**：

| 风险信号 | 风险分数 | 说明 |
|----------|----------|------|
| 游资净卖出 | +40分 | 龙虎榜显示游资整体净卖出 |
| 一线游资卖出 | +30分 | 知名一线游资出现在卖方席位 |
| 二线游资卖出 | +15分 | 二线游资出现在卖方席位 |
| 游资消失≥3天 | +20分 | 连续上榜后突然消失 |

**风险建议**：
- 风险分≥60：风险极高，建议立即离场
- 风险分≥40：风险较高，建议减仓或止损
- 风险分≥20：存在风险信号，密切关注
- 风险分<20：暂无明显风险

#### 5. 综合游资评分

```
综合游资评分 = (强度得分 × 0.4 + 时机得分 × 0.4) - 风险分数 × 0.3
```

### 🎯 四维度综合评分系统

**权重调整**（v9.1优化）：

| 维度 | v8.1权重 | v9.1权重 | 说明 |
|------|----------|----------|------|
| 💰 **游资动向** | - | **15%** | 🆕 新增维度 |
| 💵 **资金流向** | 45% | **35%** | 主力+整体资金一致性 |
| 📈 **相对强度** | 25% | **25%** | 相对大盘的强度 |
| 📍 **价格位置** | 20% | **15%** | 突破+支撑状态 |
| ⚡ **原有信号** | 10% | **10%** | 原始信号强度 |

### 📊 知名游资数据库

**一线游资**（成功率高、操作凌厉）：
- 东方财富证券拉萨团结路第二营业部（成功率75%）
- 华泰证券深圳益田路荣超商务中心营业部（成功率72%）
- 国泰君安成都北一环路营业部（成功率70%）
- 中国银河证券绍兴营业部（成功率68%）
- 招商证券深圳蛇口工业七路营业部（成功率71%）

**二线游资**（稳健型、有特点）：
- 中信证券杭州延安路营业部（成功率65%）
- 广发证券佛山季华六路营业部（成功率63%）
- 国信证券深圳泰然九路营业部（成功率62%）
- 申万宏源上海东川路营业部（成功率64%）
- 东方财富证券拉萨东环路第二营业部（成功率66%）

---

## 二、输出结果优化

### 1. 优先排序逻辑

```
排序权重 = 综合评分 + (游资活跃 ? 5分 : 0分)
排序规则：游资活跃股 → 综合评分 → 游资评分
```

### 2. 新增输出字段

| 字段名 | 说明 | 示例 |
|--------|------|------|
| 游资评分 | 综合游资评分（0-100） | 68.5 |
| 龙虎榜次数 | 近30天上榜次数 | 3次 |
| 游资净买入 | 游资净买入金额（元） | 5000万 |
| 游资强度 | 游资强度得分 | 65分 |
| 买入时机 | 时机评分 | 75分 |
| 游资风险 | 风险评分 | 15分 |
| 游资阶段 | 操作阶段 | 建仓期/加仓期/拉升期/出货期 |
| 游资建议 | 操作建议 | 积极关注/适合跟进/回避 |
| 游资活跃 | 是否活跃 | True/False |

### 3. 输出展示示例

```
  🔥 000001 | 平安银行 | 💰当前价: 12.50元 🔥连续2天 👑超级龙头
     🏆 综合评级: AAA(极强) | 评分: 82.5
     🏢 所属板块: 银行
     📊 涨幅: 3.20% | 量比: 1.85 | 换手率: 12.50% | 流通市值: 85.2亿
     💰 资金共振: 强一致流入 | 主力净流入: 1.25亿 | 流量占比: 15.8%
     📈 相对强度: 显著强势 | 当日超额: +2.1% | 5日超额: +5.3% (沪深300: 1.1%)
     📍 价格位置: 突破确认+支撑稳固 | 有效突破MA60 | 站稳MA30 | 放量
     💰 游资动向: 评分68.5 | 上榜3次 | 净买入0.50亿 🔥活跃
     💸 操作阶段: 🟢建仓期 | 建议: 积极关注
     ⚖️  止损: 11.80元(-5.6%) | 止盈: 14.20元(+13.6%) | 风险收益比: 2.43 (良好)
```

### 4. 统计信息新增

```
   💰 v9.1游资: 活跃=5只 | 有介入=8只 | 建仓期=2只 | 加仓期=3只
   💸 发现 5 只【游资活跃】股！
```

---

## 三、技术实现细节

### 1. 核心方法

| 方法名 | 功能 | 位置 |
|--------|------|------|
| `fetch_lhb_data()` | 获取龙虎榜数据并缓存 | 第1742行 |
| `calculate_hot_money_strength()` | 计算游资强度评分 | 第1837行 |
| `assess_buy_timing()` | 评估买入时机 | 第1997行 |
| `detect_risk_signals()` | 识别风险信号 | 第2088行 |
| `analyze_hot_money_for_stock()` | 综合分析个股游资情况 | 第2172行 |
| `calculate_composite_score()` | 四维度综合评分（新增游资参数） | 第1622行 |

### 2. 数据缓存机制

- **缓存目录**: `hot_money_cache/`
- **缓存文件**: `lhb_{股票代码}_{日期}.json`
- **缓存有效期**: 当日（每天更新）
- **缓存优势**: 减少API调用，提升执行速度

### 3. 配置参数

```python
HOT_MONEY_CONFIG = {
    "lookback_days": 30,           # 龙虎榜回溯天数
    "min_appearances": 2,          # 最小上榜次数（认定为有游资）
    "min_net_buy": 5000000,        # 最小净买入金额（500万）
    "continuity_days": 3,          # 连续性评估天数
    "weight_in_composite": 0.15,   # 游资因子权重（15%）
}
```

---

## 四、使用指南

### 1. 基本使用

```bash
python scan_stock_v9.py
```

脚本会自动：
1. 获取实时行情数据
2. 执行多步骤筛选
3. 获取龙虎榜数据并分析游资动向
4. 计算四维度综合评分
5. 优先展示游资活跃的优质标的

### 2. 参数调整

**调整游资权重**：
修改 `scan_stock_v9.py` 第110行：
```python
"weight_in_composite": 0.15,  # 默认15%，可调整为10%-20%
```

**调整上榜次数阈值**：
修改 `scan_stock_v9.py` 第107行：
```python
"min_appearances": 2,  # 默认2次，可调整为1-5次
```

**调整回溯天数**：
修改 `scan_stock_v9.py` 第106行：
```python
"lookback_days": 30,  # 默认30天，可调整为20-60天
```

### 3. 结果解读

#### 游资活跃股
- ✅ **龙虎榜次数≥2** + **净买入>0**
- ✅ **综合游资评分≥30**
- ✅ **操作阶段为建仓期或加仓期**

#### 优先关注
1. **建仓期 + 一线游资参与** = 最佳介入时机
2. **加仓期 + 持续净买入** = 可以跟进
3. **AAA评级 + 游资活跃** = 顶级标的

#### 风险回避
1. **出货期** = 坚决回避
2. **游资风险分≥60** = 立即离场
3. **一线游资大额卖出** = 高度警惕

---

## 五、预期效果

### 1. 选股质量提升
- ✅ 识别游资介入的潜力股
- ✅ 把握最佳买入时机（建仓期/加仓期）
- ✅ 避开游资撤退风险（出货期）

### 2. 风险控制增强
- ✅ 提前预警游资撤退信号
- ✅ 识别知名游资的买卖动向
- ✅ 综合四维度评估，降低单一指标误判

### 3. 收益潜力提高
- ✅ 跟随知名游资操作路径
- ✅ 游资活跃股优先展示
- ✅ 多维共振标的成功率更高

---

## 六、版本对比

| 特性 | v8.1 | v9.1 |
|------|------|------|
| 龙虎榜分析 | ❌ | ✅ |
| 游资强度评分 | ❌ | ✅ |
| 买入时机判断 | ❌ | ✅ |
| 风险预警机制 | ❌ | ✅ |
| 知名游资识别 | ❌ | ✅ |
| 评分维度 | 3维 | **4维** |
| 游资因子权重 | - | **15%** |
| 资金流向权重 | 45% | **35%** |
| 价格位置权重 | 20% | **15%** |
| 优先排序 | 综合评分 | **游资活跃+评分** |
| 输出字段 | 基础 | **+11个游资字段** |

---

## 七、注意事项

### 1. 数据依赖
- **依赖接口**: akshare（东方财富）
- **网络要求**: 需要稳定的网络连接
- **API限制**: 注意不要频繁调用，避免IP被限制

### 2. 使用建议
- 游资数据仅作参考，不构成投资建议
- 建仓期并非一定上涨，需结合其他维度综合判断
- 一线游资也有失手时候，注意止损
- 游资撤退信号出现时应果断离场

### 3. 数据时效性
- 龙虎榜数据T+1日公布（当日数据次日才能看到）
- 缓存文件每日更新
- 建议每天运行一次获取最新数据

### 4. 知名游资库更新
- 现有游资库基于历史数据统计
- 游资榜单会随市场变化
- 建议定期更新 `KNOWN_HOT_MONEY_DESKS` 配置

---

## 八、更新日志

### v9.1 (2026-01-15) - 游资追踪版
- ✅ **新增龙虎榜数据获取**（akshare接口）
- ✅ **新增游资强度评分系统**（0-100分，四维度评分）
- ✅ **新增买入时机判断**（建仓/加仓/拉升/出货阶段识别）
- ✅ **新增风险预警机制**（识别游资撤退信号）
- ✅ **新增知名游资数据库**（一线/二线游资席位识别）
- ✅ **优化综合评分系统**（四维度，新增游资因子15%权重）
- ✅ **优化排序逻辑**（游资活跃股优先展示）
- ✅ **新增11个游资字段**（评分、阶段、建议等）
- ✅ **优化输出展示**（新增游资动向详细信息）
- ✅ **新增数据缓存机制**（提升执行效率）

### v8.1 (2026-01-14) - 精准剪枝版
- ✅ 收紧筛选条件
- ✅ 综合评分阈值筛选
- ✅ 风险收益比筛选
- ✅ 板块信息显示
- ✅ 排除创业板和科创板

---

## 九、技术支持

如有问题或建议，欢迎反馈：
- 检查日志输出排查问题
- 确认网络连接正常
- 查看 `hot_money_cache/` 目录确认数据缓存

---

**v9.1 游资追踪版 - 让游资的足迹清晰可见，把握最佳买入时机！** 🎯💰
