# v8.1 更新摘要 - 排除创业板和科创板

## 🎯 本次更新重点

### ⭐ 新增板块限制功能
**现在脚本只筛选沪深主板股票，自动排除：**
- ❌ **创业板**（代码3开头：300xxx, 301xxx等）
- ❌ **科创板**（代码688开头：688xxx）
- ❌ **北交所**（代码8、4开头，已在之前版本排除）

### ✅ 保留板块
- ✅ **沪市主板**（代码600, 601, 603等开头）
- ✅ **深市主板**（代码000, 001等开头）

---

## 📊 筛选效果展示

运行脚本时，第一步会显示：
```
【第一步】涨幅区间筛选: -1% ≤ 涨幅 ≤ 5.5%
   💡 v8.1优化: 收紧区间，聚焦更稳健的标的

   ✅ 筛选后剩余: 156 只（仅沪深主板）
   ⚠️ 已排除: 创业板89只 | 科创板23只
   📉 包含回调股: 12 只（捕捉反转机会）
   📈 包含强势股: 8 只（涨幅5-5.5%）
```

---

## 💡 为什么要排除创业板和科创板？

### 1. **波动性差异**
| 板块 | 涨跌幅限制 | 波动特点 | 适合策略 |
|------|------------|----------|----------|
| 主板 | 10% | 波动适中 | ✅ 次日冲高 |
| 创业板 | 20% | 波动剧烈 | ⚠️ 激进操作 |
| 科创板 | 20% | 波动更大 | ⚠️ 激进操作 |

### 2. **策略定位匹配**
- 本脚本定位：**次日冲高稳健策略**
- 主板股票：波动可控，风险收益比合理
- 创业板/科创板：波动大，不适合稳健策略

### 3. **风险控制**
- 创业板和科创板20%涨跌幅，日内波动剧烈
- 主板10%涨跌幅，更符合"次日冲高"的风控要求
- 降低因波动过大导致的风险

---

## 🔧 代码实现位置

**文件**: `scan_stock_v8.py`
**位置**: 第1826-1861行（step1_filter_by_change_pct函数）

```python
# v8.1新增：排除创业板股票（3开头）
df_filtered = df_filtered[~df_filtered['代码'].str.startswith('3')]

# v8.1新增：排除科创板股票（688开头）
df_filtered = df_filtered[~df_filtered['代码'].str.startswith('688')]
```

---

## 📈 预期效果

### 优化前（v8.0包含所有板块）
- 第一步筛选后：约300-400只
- 最终输出：30-50只（包含创业板和科创板）

### 优化后（v8.1仅主板）
- 第一步筛选后：约150-200只（排除创业板和科创板）
- 最终输出：≤20只（仅沪深主板优质股）

### 质量提升
- ✅ 标的更加稳健
- ✅ 波动风险降低
- ✅ 更符合"次日冲高"策略定位
- ✅ 聚焦主板优质股

---

## 🚀 如何使用

直接运行脚本即可，无需任何配置：
```bash
python scan_stock_v8.py
```

脚本会自动：
1. 第一步就排除创业板和科创板
2. 后续只对主板股票进行筛选
3. 最终输出≤20只主板优质标的

---

## ⚙️ 如需调整

如果您希望**恢复包含创业板和科创板**，可以注释掉排除代码：

**文件**: `scan_stock_v8.py`
**位置**: 第1840-1844行

```python
# 注释掉以下两行即可恢复包含创业板和科创板
# df_filtered = df_filtered[~df_filtered['代码'].str.startswith('3')]
# df_filtered = df_filtered[~df_filtered['代码'].str.startswith('688')]
```

---

## 📋 完整的v8.1优化列表

1. ✅ 收紧涨幅区间：-1%~5.5%
2. ✅ 提高量比要求：≥1.2
3. ✅ 收紧换手率：10%~18%
4. ✅ 收紧市值区间：40~120亿
5. ✅ **新增板块限制：仅沪深主板** ⭐
6. ✅ **排除创业板（3开头）** ⭐
7. ✅ **排除科创板（688开头）** ⭐
8. ✅ 综合评分阈值：≥55
9. ✅ 风险收益比筛选：≥1.5
10. ✅ 数量限制：Top 20
11. ✅ 板块信息显示

---

**现在可以运行脚本了！选股将更加精准，只保留沪深主板的优质标的。** 🎉
